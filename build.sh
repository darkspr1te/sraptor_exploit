#clean up first
rm *.o
rm *.hex
rm *.list
rm *.bin
rm *.elf
#arm-none-eabi-as --warn --fatal-warnings -mcpu=cortex-m0 flash.s -o flash.o


#these are for doing a flash write version - ignored here 
#arm-none-eabi-ld -o uart2.flash.elf -T flash.ld flash.o uart2.o
#arm-none-eabi-objdump -D uart2.flash.elf > uart2.flash.list
#arm-none-eabi-objcopy uart2.flash.elf uart2.flash.bin -O binary
arm-none-eabi-as --warn --fatal-warnings -mcpu=cortex-m0 sram.s -o sram.o
#build UART2 , PA3,PA22
arm-none-eabi-gcc -Wall -Werror -O2 -nostdlib -nostartfiles -ffreestanding  -mcpu=cortex-m0 -mthumb -c uart2.c -o uart2.o
arm-none-eabi-ld -o uart2.sram.elf -T sram.ld sram.o uart2.o
arm-none-eabi-objdump -D uart2.sram.elf > uart2.sram.list
arm-none-eabi-objcopy uart2.sram.elf uart2.sram.hex -O ihex
arm-none-eabi-objcopy uart2.sram.elf uart2.sram.bin -O binary
#build UART1 version, PA10,PA9 - led support on PB12 for backpill testing - PA0 for trigger
arm-none-eabi-gcc -Wall -Werror -O2 -nostdlib -nostartfiles -ffreestanding  -mcpu=cortex-m0 -mthumb -c uart.c -o uart.o
arm-none-eabi-ld -o uart.sram.elf -T sram.ld sram.o uart.o
arm-none-eabi-objdump -D uart.sram.elf > uart.sram.list
arm-none-eabi-objcopy uart.sram.elf uart.sram.hex -O ihex
arm-none-eabi-objcopy uart.sram.elf uart.sram.hex -O binary
